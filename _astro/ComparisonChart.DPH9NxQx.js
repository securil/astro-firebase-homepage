import{j as h}from"./jsx-runtime.D_zvdyIk.js";import{r as R}from"./index.BVOCwoKb.js";const B=({data:i=[],type:p="bar",groupKey:a="generation",valueKey:n="averageScore",labelKey:S=null,title:m="",horizontal:c=!1,secondaryData:f=null,secondaryValueKey:e=""})=>{const x=R.useRef(null),g=R.useRef(null),u=S||a,A=()=>{if(!i||i.length===0)return{labels:[],datasets:[]};let t=[...i];a==="generation"?t.sort((r,s)=>r[a]-s[a]):t.sort((r,s)=>s[n]-r[n]);const l=t.map(r=>a==="generation"?`${r[u]}기`:a==="gender"?r[u]:r[u]||r[a]),o=[{label:d(n),data:t.map(r=>r[n]),backgroundColor:C(i.length)[0],borderColor:$(i.length)[0],borderWidth:1}];if(f&&e){const r=[];t.forEach(s=>{const b=f.find(w=>w[a]===s[a]);b?r.push(b):r.push({[e]:0})}),o.push({label:d(e),data:r.map(s=>s[e]),backgroundColor:C(i.length)[1],borderColor:$(i.length)[1],borderWidth:1,...p==="line"&&{fill:!1,tension:.1},yAxisID:"y1"})}return{labels:l,datasets:o}},C=t=>[["rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)","rgba(255, 206, 86, 0.6)"],["rgba(255, 99, 132, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(54, 162, 235, 0.6)","rgba(153, 102, 255, 0.6)"]].map(o=>{if(t<=o.length)return o.slice(0,t);const r=[];for(let s=0;s<t;s++)r.push(o[s%o.length]);return r}),$=t=>C(t).map(o=>o.map(r=>r.replace("0.6","1"))),d=t=>({averageScore:"평균 스코어",bestScore:"베스트 스코어",gamesPlayed:"참가 횟수",memberCount:"회원 수",participationRate:"참여율 (%)",handicap:"핸디캡",totalRounds:"총 라운드 수",improvement:"향상도",activeMembers:"활동 회원 수"})[t]||t,j=()=>n==="averageScore"||n==="bestScore";R.useEffect(()=>{if(!i||i.length===0||!x.current)return;if(typeof Chart>"u"){console.error("Chart 객체가 정의되지 않았습니다.");return}const t=x.current.getContext("2d");g.current&&g.current.destroy();const l=p==="horizontalBar"?"bar":p,o={responsive:!0,maintainAspectRatio:!1,indexAxis:c?"y":"x",plugins:{title:{display:!!m,text:m,font:{size:16}},legend:{position:"top"},tooltip:{callbacks:{label:function(r){let s=r.dataset.label||"";const b=r.parsed.y!==void 0?c?r.parsed.x:r.parsed.y:r.raw;return s&&(s+=": "),n==="averageScore"||n==="bestScore"||e&&(e==="averageScore"||e==="bestScore")?`${s}${b} 타`:n==="participationRate"||e&&e==="participationRate"?`${s}${b}%`:`${s}${b}`}}}},scales:{x:{title:{display:!c,text:c?"":k(a)},ticks:{autoSkip:!1,maxRotation:c?0:45,minRotation:c?0:45},grid:{display:!1}},y:{reverse:!c&&j(),title:{display:!0,text:c?k(a):d(n)},ticks:{callback:function(r){return n==="averageScore"||n==="bestScore"?`${r} 타`:n==="participationRate"?`${r}%`:r}}}}};return f&&e&&(o.scales.y1={position:"right",reverse:!c&&(e==="averageScore"||e==="bestScore"),title:{display:!0,text:d(e)},ticks:{callback:function(r){return e==="averageScore"||e==="bestScore"?`${r} 타`:e==="participationRate"?`${r}%`:r}},grid:{drawOnChartArea:!1}}),g.current=new Chart(t,{type:l,data:A(),options:o}),()=>{g.current&&g.current.destroy()}},[i,p,a,n,S,c,f,e,m]);const k=t=>({generation:"기수",gender:"성별",year:"연도",month:"월",averageScore:"평균 스코어",participationRate:"참여율"})[t]||t;return h.jsxs("div",{className:"comparison-chart-container",style:{height:"400px",width:"100%"},children:[h.jsx("canvas",{ref:x}),(!i||i.length===0)&&h.jsx("div",{className:"no-data-message",style:{textAlign:"center",paddingTop:"180px",color:"#888"},children:h.jsx("p",{children:"표시할 데이터가 없습니다."})})]})};export{B as default};
