import{j as u}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.BVOCwoKb.js";const R=({data:c=[],type:l="bar",metric:e="averageScore",limit:d=10,title:g="랭킹 차트"})=>{const h=i.useRef(null),b=i.useRef(null),p=()=>{const a=["rgba(75, 192, 192, 0.8)","rgba(54, 162, 235, 0.8)","rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(100, 181, 246, 0.8)","rgba(76, 175, 80, 0.8)","rgba(121, 85, 72, 0.8)","rgba(158, 158, 158, 0.8)"],t=[];for(let s=0;s<Math.ceil(d/a.length);s++)t.push(...a);return{backgroundColor:t.slice(0,d),borderColor:t.map(s=>s.replace("0.8","1")).slice(0,d)}},C=()=>{let a=[...c];if(e==="averageScore"||e==="bestScore"?a.sort((r,o)=>r[e]-o[e]):a.sort((r,o)=>o[e]-r[e]),a=a.slice(0,d),l==="radar")return{labels:["평균 스코어","베스트 스코어","참가 횟수","향상도","핸디캡"],datasets:a.map((r,o)=>{const n=p();return{label:r.name,data:[100-r.averageScore,100-r.bestScore,r.gamesPlayed,r.improvement?-r.improvement:0,r.handicap||0],backgroundColor:n.backgroundColor[o%n.backgroundColor.length].replace("0.8","0.2"),borderColor:n.borderColor[o%n.borderColor.length],borderWidth:2,pointBackgroundColor:n.backgroundColor[o%n.backgroundColor.length],pointRadius:5}})};const{backgroundColor:t,borderColor:s}=p();return{labels:a.map(r=>r.name),datasets:[{label:f(e),data:a.map(r=>r[e]),backgroundColor:t,borderColor:s,borderWidth:1}]}},f=a=>({averageScore:"평균 스코어",bestScore:"베스트 스코어",gamesPlayed:"참가 횟수",improvement:"향상도",handicap:"핸디캡"})[a]||a,x=()=>e==="averageScore"||e==="bestScore";return i.useEffect(()=>{if(!c||c.length===0)return;if(typeof Chart>"u"){console.error("Chart 객체가 정의되지 않았습니다.");return}const a=h.current.getContext("2d");b.current&&b.current.destroy();const t=l==="horizontalBar"?"bar":l,s={responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!!g,text:g},legend:{display:l==="radar",position:"top"},tooltip:{callbacks:{label:function(r){const o=r.raw;if(l==="radar")return`${r.dataset.label||""}: ${o}`;{const n=r.dataset.label||"",v=r.dataIndex;return c[v],`${n}: ${o}${e==="averageScore"||e==="bestScore"?" 타":""}`}}}}},scales:t!=="radar"?{x:{ticks:{autoSkip:!1,maxRotation:45,minRotation:45},title:{display:!0,text:"회원"},grid:{display:!1}},y:{reverse:x(),title:{display:!0,text:f(e)},ticks:{callback:function(r){return r+(e==="averageScore"||e==="bestScore"?" 타":"")}}}}:{}};return l==="horizontalBar"&&(s.indexAxis="y"),b.current=new Chart(a,{type:t,data:C(),options:s}),()=>{b.current&&b.current.destroy()}},[c,l,e,d,g]),u.jsxs("div",{className:"ranking-chart-container",style:{height:l==="horizontalBar"?`${Math.max(300,c.length*30)}px`:"400px"},children:[u.jsx("canvas",{ref:h}),c.length===0&&u.jsx("div",{className:"no-data-message",children:u.jsx("p",{children:"표시할 랭킹 데이터가 없습니다."})})]})};export{R as default};
