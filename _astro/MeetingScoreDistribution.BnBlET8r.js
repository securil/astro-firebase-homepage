import{C as k,b as F,L as B,d as D,e as A,B as R,c as $,p as E,a as L,i as z,j as t,f as P,g as _}from"./index.DJGCb4km.js";import{r as H}from"./index.BJfUAbRs.js";k.register(F,B,D,A,R,$,E,L,z);const Z=({meetingStatsData:c,membersData:d})=>{if(H.useEffect(()=>{console.log("MeetingScoreDistribution 컴포넌트 마운트"),console.log("받은 데이터 개수:",c?.length)},[c]),!c||c.length===0)return t.jsx("div",{className:"text-center py-8",children:"성적 분포 정보를 수집 중입니다..."});console.log("모든 모임 ID:",c.map(e=>e.meetingId));const h=c.filter(e=>e.participantCount>0);if(console.log("참가자 수가 0보다 큰 모임 ID:",h.map(e=>e.meetingId)),h.length===0)return t.jsx("div",{className:"text-center py-8",children:"표시할 유효한 모임 데이터가 없습니다."});const m=h.filter(e=>e.meetingId?e.meetingId.toString().length===4:(console.log("meetingId가 없는 데이터:",e),!1)),x=[...m].sort((e,s)=>{const n=parseInt(e.meetingId,10);return parseInt(s.meetingId,10)-n});let a=x;if(x.length>6&&(a=x.slice(0,6)),a=[...a].sort((e,s)=>{const n=parseInt(e.meetingId,10),o=parseInt(s.meetingId,10);return n-o}),a.length===0)return console.log("표시할 데이터가 없습니다!"),t.jsx("div",{className:"text-center py-8",children:"성적 분포 정보를 수집 중입니다..."});console.log(`원본 데이터: ${c.length}개, 유효 데이터: ${h.length}개, 4자리 ID: ${m.length}개, 표시 데이터: ${a.length}개`),console.log("표시할 모임 ID:",a.map(e=>e.meetingId));const g=a.map(e=>{if(!e.meetingId)return"알 수 없음";const s=e.meetingId.toString();return s.length<4?s:`${s.slice(0,2)}.${s.slice(2,4)}`}),r=a.map(e=>e.averageScore===void 0||e.averageScore===null?(console.log("averageScore가 없는 항목:",e),0):e.averageScore),p=a.map(e=>e.bestScore===void 0||e.bestScore===null?(console.log("bestScore가 없는 항목:",e),0):e.bestScore),l=a.map(e=>e.participantCount===void 0||e.participantCount===null?(console.log("participantCount가 없는 항목:",e),0):e.participantCount),I=a[a.length-1],y=l.reduce((e,s)=>e+s,0),b=(r.reduce((e,s)=>e+s,0)/r.length).toFixed(1),f=Math.min(...p),j=l.slice(0,-1).reduce((e,s)=>e+s,0)/(l.length-1),u=((I.participantCount-j)/j*100).toFixed(1),i=r.length>1?(r[r.length-1]-r[r.length-2]).toFixed(1):0,v=(()=>{if(!d||!d.rawData||d.rawData.length===0)return{name:"미상",generation:"미상",memberId:null};const e=[...a].sort((o,S)=>o.bestScore-S.bestScore)[0],s=e.bestMemberId||null;let n=d.rawData.find(o=>o.memberId===s);if(!n&&d.rawData.length>0){const o=Math.floor(Math.random()*d.rawData.length);n=d.rawData[o]}return{name:n?.name||"미상",generation:n?.generation||"미상",memberId:n?.memberId||null,score:e.bestScore}})(),N={labels:g,datasets:[{label:"평균 타수",data:r,borderColor:"rgba(10, 95, 56, 1)",backgroundColor:"rgba(10, 95, 56, 0.7)",tension:.3,fill:!1,pointBackgroundColor:"rgba(10, 95, 56, 1)",pointRadius:4,pointHoverRadius:6,yAxisID:"y"},{label:"베스트 타수",data:p,borderColor:"rgba(26, 117, 187, 1)",backgroundColor:"rgba(26, 117, 187, 0.7)",tension:.3,fill:!1,pointBackgroundColor:"rgba(26, 117, 187, 1)",pointRadius:4,pointHoverRadius:6,yAxisID:"y"}]};console.log("차트 렌더링 데이터:",{labels:g,averageScores:r,bestScores:p});const C={labels:g,datasets:[{label:"참가자 수",data:l,backgroundColor:"rgba(247, 209, 84, 0.7)",borderColor:"rgba(247, 209, 84, 1)",borderWidth:1}]};console.log("참가자 수 차트 데이터:",{labels:g,participantCounts:l});const w={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"모임별 평균/베스트 타수",font:{size:16,weight:"bold"}},tooltip:{callbacks:{label:function(e){return e.dataset.label+": "+e.parsed.y+"타"}}}},scales:{y:{reverse:!0,min:Math.floor(Math.min(...p)-5),max:Math.ceil(Math.max(...r)+2),title:{display:!0,text:"타수 (낮을수록 좋음)",font:{weight:"bold"}},ticks:{stepSize:5,callback:function(e){return e+"타"}}},x:{title:{display:!0,text:"모임 날짜 (년.월)",font:{weight:"bold"}}}}},M={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"모임별 참가자 수",font:{size:16,weight:"bold"}},tooltip:{callbacks:{label:function(e){return"참가자 수: "+e.parsed.y+"명"}}}},scales:{y:{beginAtZero:!0,min:0,max:Math.ceil(Math.max(...l)*1.2),title:{display:!0,text:"참가자 수",font:{weight:"bold"}},ticks:{callback:function(e){return e+"명"}}},x:{title:{display:!0,text:"모임 날짜 (년.월)",font:{weight:"bold"}}}}};return t.jsxs("div",{className:"meeting-score-distribution",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[t.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:b}),t.jsx("div",{className:"text-gray-600",children:"전체 평균 타수"}),i!=0&&t.jsxs("div",{className:`text-sm mt-1 ${parseFloat(i)<0?"text-green-600":"text-red-600"}`,children:[parseFloat(i)<0?"▼":"▲"," ",Math.abs(i),"타 (",parseFloat(i)<0?"향상":"악화",")"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[t.jsx("div",{className:"text-4xl font-bold text-secondary mb-2",children:f}),t.jsx("div",{className:"text-gray-600",children:"전체 베스트 타수"}),t.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[v.name," (",v.generation,")"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[t.jsx("div",{className:"text-4xl font-bold text-accent mb-2",children:"35"}),t.jsx("div",{className:"text-gray-600",children:"이글/버디 기록"}),t.jsx("div",{className:"text-sm text-gray-500 mt-1",children:t.jsx("span",{className:"italic",children:"정보 수집중..."})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsx("div",{className:"h-64 md:h-80",children:g.length>0&&r.length>0?t.jsx(P,{data:N,options:w},"scoreChart"):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"차트 데이터를 불러오는 중입니다..."})})}),t.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:t.jsx("div",{className:"h-64 md:h-80",children:g.length>0&&l.length>0?t.jsx(_,{data:C,options:M},"participantChart"):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"차트 데이터를 불러오는 중입니다..."})})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-xl font-semibold mb-4",children:"성적 분포 분석 요약"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-gray-700",children:[t.jsxs("li",{children:["현재까지 총 ",a.length,"회 모임이 기록되었습니다."]}),t.jsxs("li",{children:["전체 평균 타수는 ",b,"타입니다."]}),t.jsxs("li",{children:["전체 베스트 타수는 ",f,"타입니다."]}),t.jsx("li",{children:i!=0?t.jsxs(t.Fragment,{children:["최근 모임 평균 타수는 직전 모임 대비 ",Math.abs(i),"타",parseFloat(i)<0?" 감소(향상)":" 증가(악화)","했습니다."]}):"타수 변화를 계산할 데이터가 부족합니다."})]}),t.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-gray-700",children:[t.jsxs("li",{children:["모임 평균 참가자 수는 ",Math.round(y/a.length),"명입니다."]}),t.jsxs("li",{children:["가장 많은 참가자가 참여한 모임은 ",Math.max(...l),"명이었습니다."]}),t.jsx("li",{children:u!=0?t.jsxs(t.Fragment,{children:["최근 모임 참가자 수는 평균 대비 ",u,"%",parseFloat(u)>0?" 증가":" 감소","했습니다."]}):"참가자 변화를 계산할 데이터가 부족합니다."})]})]})]})]})};export{Z as default};
